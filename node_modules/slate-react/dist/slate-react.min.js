!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("slate"),require("immutable"),require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["exports","slate","immutable","react-dom","react"],t):t(e.SlateReact={},e.Slate,e.Immutable,e.ReactDOM,e.React)}(this,function(e,t,n,r,o){"use strict";var a="default"in n?n.default:n;r=r&&r.hasOwnProperty("default")?r.default:r,o=o&&o.hasOwnProperty("default")?o.default:o;var i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var l=s,u=c;function d(e){if(l===setTimeout)return setTimeout(e,0);if((l===s||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}"function"==typeof i.setTimeout&&(l=setTimeout),"function"==typeof i.clearTimeout&&(u=clearTimeout);var f,p=[],v=!1,h=-1;function m(){v&&f&&(v=!1,f.length?p=f.concat(p):h=-1,p.length&&y())}function y(){if(!v){var e=d(m);v=!0;for(var t=p.length;t;){for(f=p,p=[];++h<t;)f&&f[h].run();h=-1,t=p.length}f=null,v=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===c||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};function b(){}var k=b,w=b,C=b,O=b,x=b,E=b,S=b;var T=i.performance||{},F=T.now||T.mozNow||T.msNow||T.oNow||T.webkitNow||function(){return(new Date).getTime()};var N=new Date;var D={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new g(e,t)),1!==p.length||v||d(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:k,addListener:w,once:C,off:O,removeListener:x,removeAllListeners:E,emit:S,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*F.call(T),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-N)/1e3}},R="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function A(e,t){return e(t={exports:{}},t.exports),t.exports}var B=1e3,j=60*B,I=60*j,L=24*I,M=365.25*L,P=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*M;case"days":case"day":case"d":return n*L;case"hours":case"hour":case"hrs":case"hr":case"h":return n*I;case"minutes":case"minute":case"mins":case"min":case"m":return n*j;case"seconds":case"second":case"secs":case"sec":case"s":return n*B;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?q(n=e,L,"day")||q(n,I,"hour")||q(n,j,"minute")||q(n,B,"second")||n+" ms":function(e){if(e>=L)return Math.round(e/L)+"d";if(e>=I)return Math.round(e/I)+"h";if(e>=j)return Math.round(e/j)+"m";if(e>=B)return Math.round(e/B)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function q(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var _=A(function(e,t){function n(e){var n;function o(){if(o.enabled){var e=o,r=+new Date,a=r-(n||r);e.diff=a,e.prev=n,e.curr=r,n=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var a=i[c];n=o.call(e,a),i.splice(c,1),c--}return n}),t.formatArgs.call(e,i),(o.log||t.log||console.log.bind(console)).apply(e,i)}}return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),o.destroy=r,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function r(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=P,t.instances=[],t.names=[],t.skips=[],t.formatters={}}),W=(_.coerce,_.disable,_.enable,_.enabled,_.humanize,_.instances,_.names,_.skips,_.formatters,A(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==D&&"env"in D&&(e=D.env.DEBUG),e}(t=e.exports=_).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}));W.log,W.formatArgs,W.save,W.load,W.useColors,W.storage,W.colors;function V(e,t){function n(n,r,o,a,i){var s=r[o];return null!=s||n?null==s&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(s)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+s):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!0].concat(t))},r}var U={block:V("Block",function(e){return t.Block.isBlock(e)}),blocks:V("List<Block>",function(e){return t.Block.isBlockList(e)}),change:V("Change",function(e){return t.Change.isChange(e)}),data:V("Data",function(e){return t.Data.isData(e)}),document:V("Document",function(e){return t.Document.isDocument(e)}),inline:V("Inline",function(e){return t.Inline.isInline(e)}),inlines:V("Inline",function(e){return t.Inline.isInlineList(e)}),leaf:V("Leaf",function(e){return t.Leaf.isLeaf(e)}),leaves:V("List<Leaf>",function(e){return t.Leaf.isLeafList(e)}),mark:V("Mark",function(e){return t.Mark.isMark(e)}),marks:V("Set<Mark>",function(e){return t.Mark.isMarkSet(e)}),node:V("Node",function(e){return t.Node.isNode(e)}),nodes:V("List<Node>",function(e){return t.Node.isNodeList(e)}),range:V("Range",function(e){return t.Range.isRange(e)}),ranges:V("List<Range>",function(e){return t.Range.isRangeList(e)}),value:V("Value",function(e){return t.Value.isValue(e)}),text:V("Text",function(e){return t.Text.isText(e)}),texts:V("List<Text>",function(e){return t.Text.isTextList(e)})};function z(e){return function(){return e}}var K=function(){};K.thatReturns=z,K.thatReturnsFalse=z(!1),K.thatReturnsTrue=z(!0),K.thatReturnsNull=z(null),K.thatReturnsThis=function(){return this},K.thatReturnsArgument=function(e){return e};var H=K;var J=function(e,t,n,r,o,a,i,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,i,s],u=0;(c=new Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},$=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z=A(function(e){e.exports=function(){function e(e,t,n,r,o,a){a!==Y&&J(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=H,n.PropTypes=n,n}()}),Q=function(e,t){if(!e)throw new Error("Invariant failed")},ee=function(e,t){return e===t};var te=function(e,t){0},ne=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onPaste","onSelect"],re=self.atob.bind(self),oe=self.btoa.bind(self);function ae(e){var t=JSON.stringify(e);return oe(encodeURIComponent(t))}function ie(e){var t=decodeURIComponent(re(e));return JSON.parse(t)}var se,ce={deserialize:function(e,n){var r=ie(e);return t.Value.fromJSON(r,n)},deserializeNode:function(e,n){var r=ie(e);return t.Node.fromJSON(r,n)},serialize:function(e,t){return ae(e.toJSON(t))},serializeNode:function(e,t){return ae(e.toJSON(t))}},le=A(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)o["f"+a]=111+a;function i(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return s(e,t)}),o=function(e){return r.some(function(t){return c(t,e)})};return null==n?o:o(n)}function s(e,t){var r=t&&t.byKey,o={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var s in n)o[n[s]]=!1;var c=!0,d=!1,f=void 0;try{for(var p,v=a[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var h=p.value,m=h.endsWith("?");m&&(h=h.slice(0,-1));var y=u(h),g=n[y];1!=i&&g||(r?o.key=y:o.which=l(h)),g&&(o[g]=!m||null),1==i&&!g&&r&&(o.shiftKey=null)}}catch(e){d=!0,f=e}finally{try{!c&&v.return&&v.return()}finally{if(d)throw f}}return o}function c(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n?t.key.toLowerCase():"which"==n?91==r&&93==t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function l(e){return e=u(e),o[e]||e.toUpperCase().charCodeAt(0)}function u(e){return e=e.toLowerCase(),e=r[e]||e}t.default=i,t.isHotkey=i,t.isCodeHotkey=function(e,t){return i(e,t)},t.isKeyHotkey=function(e,t){return i(e,{byKey:!0},t)},t.parseHotkey=s,t.compareHotkey=c,t.toKeyCode=l,t.toKeyName=u});(se=le)&&se.__esModule&&Object.prototype.hasOwnProperty.call(se,"default")&&se.default;le.isHotkey,le.isCodeHotkey;var ue=le.isKeyHotkey,de=(le.parseHotkey,le.compareHotkey,le.toKeyCode,le.toKeyName,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),fe="object"===("undefined"==typeof window?"undefined":de(window))&&"object"===("undefined"==typeof document?"undefined":de(document))&&9===document.nodeType,pe=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ve=void 0;if(fe){var he=!0,me=!1,ye=void 0;try{for(var ge,be=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(he=(ge=be.next()).done);he=!0){var ke=pe(ge.value,2),we=ke[0];if(ke[1].test(window.navigator.userAgent)){ve=we;break}}}catch(e){me=!0,ye=e}finally{try{!he&&be.return&&be.return()}finally{if(me)throw ye}}}var Ce=void 0;if(fe){var Oe=!0,xe=!1,Ee=void 0;try{for(var Se,Te=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(Oe=(Se=Te.next()).done);Oe=!0){var Fe=pe(Se.value,2),Ne=Fe[0];if(Fe[1].test(window.navigator.userAgent)){Ce=Ne;break}}}catch(e){xe=!0,Ee=e}finally{try{!Oe&&Te.return&&Te.return()}finally{if(xe)throw Ee}}}var De=[["inputeventslevel1",function(e){return"inputType"in(e.InputEvent?new InputEvent("input"):{})}],["inputeventslevel2",function(e){var t=e.document.createElement("div");return t.contentEditable=!0,"onbeforeinput"in t}]],Re=[];if(fe){var Ae=!0,Be=!1,je=void 0;try{for(var Ie,Le=De[Symbol.iterator]();!(Ae=(Ie=Le.next()).done);Ae=!0){var Me=pe(Ie.value,2),Pe=Me[0];(0,Me[1])(window)&&Re.push(Pe)}}catch(e){Be=!0,je=e}finally{try{!Ae&&Le.return&&Le.return()}finally{if(Be)throw je}}}var qe="firefox"===ve,_e="safari"===ve,We="ie"===ve,Ve="edge"===ve,Ue="ios"===Ce,ze="macos"===Ce,Ke=(Re.includes("inputeventslevel1"),Re.includes("inputeventslevel2")),He={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},Je={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},$e={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},Xe={},Ge=Ue||ze,Ye=!Ge;[].concat(Object.keys(He)).concat(Object.keys(Je)).concat(Object.keys($e)).forEach(function(e){var t="is"+e[0].toUpperCase()+e.slice(1);if(!Xe[t]){var n=He[e],r=Je[e],o=$e[e],a=n&&ue(n),i=r&&ue(r),s=o&&ue(o);Xe[t]=function(e){return!(!a||!a(e))||(!!(Ge&&i&&i(e))||!!(Ye&&s&&s(e)))}}});var Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function Qe(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter,r=void 0===n?"\n":n;return"document"==e.object||"block"==e.object&&t.Block.isBlockList(e.nodes)?e.nodes.map(Qe).join(r):e.text}var et={deserialize:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.defaultBlock,a=void 0===o?"line":o,i=r.defaultMarks,s=void 0===i?[]:i,c=r.delimiter,l=void 0===c?"\n":c,u=r.toJSON,d=void 0!==u&&u;n.Set.isSet(s)&&(s=s.toArray()),a=t.Node.createProperties(a),s=s.map(t.Mark.createProperties);var f={object:"value",document:{object:"document",data:{},nodes:e.split(l).map(function(e){return Ze({},a,{object:"block",data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:e,marks:s}]}]})})}};return d?f:t.Value.fromJSON(f)},serialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Qe(e.document,t)}},tt=function e(t){if(rt(t))return t;if(rt(t.ownerDocument))return t.ownerDocument;if(rt(t.document))return t.document;if(t.parentNode)return e(t.parentNode);if(t.commonAncestorContainer)return e(t.commonAncestorContainer);if(t.startContainer)return e(t.startContainer);if(t.anchorNode)return e(t.anchorNode)},nt=9;function rt(e){return e&&e.nodeType===nt}var ot=!1,at=function(e){if(t=e,t&&t.window===t)return e;var t;var n=tt(e);if(ot){n.parentWindow.execScript("document._parentWindow = window;","Javascript");var r=n._parentWindow;return n._parentWindow=null,r}return n.defaultView||n.parentWindow};var it={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"};function st(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;t.Node.isNode(e)&&(e=e.key);var r=n.document.querySelector('[data-key="'+e+'"]');if(!r)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return r}function ct(e){var t=window.document;if(t&&t.body.createTextRange){var n=t.body.createTextRange();n.collapse(),n.select()}else e.removeAllRanges()}var lt=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dt=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},vt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ht=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),mt=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},yt=/^([\w-]+)(?::(\d+))?$/;var gt={parse:function(e){var t=yt.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=ht(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},bt="data-slate-zero-width",kt="["+bt+"]",wt="data-offset-key",Ct="["+wt+"]",Ot="[data-key]",xt="[data-slate-void]";function Et(e,n,r){Q(!t.Value.isValue(r),"As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.");var o=function(e,t){if(1==e.nodeType&&e.childNodes.length){var n=t==e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=St(e,o,r);1==e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=St(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,n),a=o.node,i=o.offset,s=at(e),c=a.parentNode,l=c.closest(Ct),u=void 0,d=void 0;if(l){var f=s.document.createRange(),p=l.closest(Ot);f.setStart(p,0),f.setEnd(a,i),d=p,u=f.toString().length}else{var v=c.closest(xt);if(!v)return null;if(!(l=v.querySelector(Ct)))return null;u=(d=l).textContent.length}u==d.textContent.length&&c.hasAttribute(bt)&&u--;var h=l.getAttribute(wt);if(!h)return null;var m=gt.parse(h).key,y=r.value;return y.document.hasDescendant(m)?y.document.createPoint({key:m,offset:u}):null}function St(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8==o.nodeType||1==o.nodeType&&0==o.childNodes.length||1==o.nodeType&&"false"==o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"==n&&a++,"backward"==n&&a--);return o||null}var Tt=it.FRAGMENT,Ft=it.HTML,Nt=it.TEXT;function Dt(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Q(!t.Value.isValue(n),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var o=at(e.target),a=o.getSelection(),i=n.value,s=i.document,c=i.fragment,l=i.selection,u=l.start,d=l.end,f=s.getClosestVoid(u.key,n),p=s.getClosestVoid(d.key,n);if(!a.isCollapsed||f){var v=ce.serializeNode(c),h=a.getRangeAt(0),m=h.cloneContents(),y=m.childNodes[0];if(m.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(y=e)}),p){var g=h.cloneRange(),b=st(p,o);g.setEndAfter(b),m=g.cloneContents()}if(f&&(y=m.childNodes[0].childNodes[1].firstChild),[].slice.call(m.querySelectorAll(kt)).forEach(function(e){var t="n"===e.getAttribute(bt);e.textContent=t?"\n":""}),3==y.nodeType){var k=o.document.createElement("span");k.style.whiteSpace="pre",k.appendChild(y),m.appendChild(k),y=k}y.setAttribute("data-slate-fragment",v);var w=t.Value.create({document:c}),C=et.serialize(w),O=o.document.createElement("div");O.appendChild(m),e.clipboardData&&e.clipboardData.setData&&!We&&(e.preventDefault(),e.clipboardData.setData(Nt,C),e.clipboardData.setData(Tt,v),e.clipboardData.setData(Ft,O.innerHTML),r());var x=e.target.closest("[data-slate-editor]");O.setAttribute("contenteditable",!0),O.style.position="absolute",O.style.left="-9999px",x.appendChild(O),a.selectAllChildren(O),o.requestAnimationFrame(function(){x.removeChild(O),ct(a),a.addRange(h),r()})}}function Rt(e,n){Q(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var r=e.closest("[data-key]");if(!r)return null;var o=r.getAttribute("data-key");return o&&n.value.document.getNode(o)||null}function At(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=st(e.key,t),r=0,o=void 0,a=t.document.createNodeIterator(n,NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1);o=a.nextNode();){var i=r+o.textContent.length;if(e.offset<=i){var s=e.offset-r;return{node:o,offset:s>=0?s:0}}r=i}return null}function Bt(e,n){Q(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var r=e.anchorNode||e.startContainer;if(!r)return null;var o=at(r);(e instanceof o.Range||o.StaticRange&&e instanceof o.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var a=e,i=a.anchorNode,s=a.anchorOffset,c=a.focusNode,l=a.focusOffset,u=a.isCollapsed,d=n.value,f=Et(i,s,n),p=u?f:Et(c,l,n);if(!f||!p)return null;if(We||Ve){var v=At(f),h=At(p);e={anchorNode:v.node,anchorOffset:v.offset,focusNode:h.node,focusOffset:h.offset}}return d.document.createRange({anchor:f,focus:p})}function jt(e,n){Q(!t.Value.isValue(n),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`."),e.nativeEvent&&(e=e.nativeEvent);var r=e,o=r.x,a=r.y,i=r.target;if(null==o||null==a)return null;var s=n.value.document,c=Rt(i,n);if(!c)return null;if(n.query("isVoid",c)){var l=i.getBoundingClientRect(),u="inline"==c.object?o-l.left<l.left+l.width-o:a-l.top<l.top+l.height-a,d=c.getFirstText(),f=s.createRange();if(u){var p=s.getPreviousText(d.key);if(p)return f.moveToEndOfNode(p)}var v=s.getNextText(d.key);return v?f.moveToStartOfNode(v):null}var h=at(i),m=void 0;if(h.document.caretRangeFromPoint)m=h.document.caretRangeFromPoint(o,a);else if(h.document.caretPositionFromPoint){var y=h.document.caretPositionFromPoint(o,a);(m=h.document.createRange()).setStart(y.offsetNode,y.offset),m.setEnd(y.offsetNode,y.offset)}else if(h.document.body.createTextRange){m=h.document.body.createTextRange();try{m.moveToPoint(o,a)}catch(e){return null}}var g=Bt(m,n);return g||null}var It=it.FRAGMENT,Lt=it.HTML,Mt=it.NODE,Pt=it.RICH,qt=it.TEXT,_t=/ data-slate-fragment="([^\s"]+)"/;function Wt(e){!We&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=Vt(t,It),r=Vt(t,Mt),o=Vt(t,Lt),a=Vt(t,Pt),i=Vt(t,qt),s=void 0;if(!n&&o&&~o.indexOf(' data-slate-fragment="')){var c=_t.exec(o),l=ht(c,2),u=(l[0],l[1]);u&&(n=u)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!=t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[It]&&(n=d[It]),d[Mt]&&(r=d[Mt]),d[qt]&&(i=d[qt])}n&&(n=ce.deserializeNode(n)),r&&(r=ce.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function Vt(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t==qt&&e.getData("Text")||null}var Ut=it.TEXT;function zt(e,t,n){var r=it[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(Ut),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[Ut]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(Ut,c)}}var Kt=W("slate:after");var Ht=W("slate:before");function Jt(){var e,t,n,o,a,i,s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).plugins,c=(e=null,t=0,n=!1,o=!1,a=!1,{onBeforeInput:function(e,t,n){var r=t.editor,o=!!e.nativeEvent;r.readOnly||o&&Ke||(Ht("onBeforeInput",{event:e}),n())},onBlur:function(t,n,a){var i=n.editor;if(!o&&!i.readOnly){var s=t.relatedTarget,c=t.target,l=at(c);if(e!==l.document.activeElement){if(s){var u=r.findDOMNode(i);if(s===u)return;if(s.hasAttribute("data-slate-spacer"))return;var d=Rt(s,i);if(u.contains(s)&&d&&!n.isVoid(d))return}Ht("onBlur",{event:t}),a()}}},onClick:function(e,t,n){Ht("onClick",{event:e}),n()},onCompositionEnd:function(e,r,o){var a=r.editor,i=t;window.requestAnimationFrame(function(){t>i||(n=!1,a.state.isComposing&&a.setState({isComposing:!1}))}),Ht("onCompositionEnd",{event:e}),o()},onCompositionStart:function(e,r,o){n=!0,t++;var a=r.editor;a.state.isComposing||a.setState({isComposing:!0}),Ht("onCompositionStart",{event:e}),o()},onCopy:function(e,t,n){var r=at(e.target);o=!0,r.requestAnimationFrame(function(){return o=!1}),Ht("onCopy",{event:e}),n()},onCut:function(e,t,n){if(!t.editor.readOnly){var r=at(e.target);o=!0,r.requestAnimationFrame(function(){return o=!1}),Ht("onCut",{event:e}),n()}},onDragEnd:function(e,t,n){a=!1,Ht("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){Ht("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){Ht("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){Ht("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var r=t.editor,o=Rt(e.target,r);t.isVoid(o)&&e.preventDefault(),We&&e.preventDefault(),a||(a=!0,We||(e.nativeEvent.dataTransfer.dropEffect="move")),Ht("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){a=!0,Ht("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.editor.readOnly||(e.preventDefault(),Ht("onDrop",{event:e}),n())},onFocus:function(t,n,a){var i=n.editor;if(!o&&!i.readOnly){var s=r.findDOMNode(i),c=at(t.target);e=c.document.activeElement,qe&&t.target!=s?s.focus():(Ht("onFocus",{event:t}),a())}},onInput:function(e,t,r){n||t.value.selection.isBlurred||(Ht("onInput",{event:e}),r())},onKeyDown:function(e,t,r){t.editor.readOnly||(n?Xe.isCompose(e)&&e.preventDefault():(!Ue&&(Xe.isBold(e)||Xe.isDeleteBackward(e)||Xe.isDeleteForward(e)||Xe.isDeleteLineBackward(e)||Xe.isDeleteLineForward(e)||Xe.isDeleteWordBackward(e)||Xe.isDeleteWordForward(e)||Xe.isItalic(e)||Xe.isRedo(e)||Xe.isSplitBlock(e)||Xe.isTransposeCharacter(e)||Xe.isUndo(e))&&e.preventDefault(),Ht("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.editor.readOnly||(e.preventDefault(),Ht("onPaste",{event:e}),n())},onSelect:function(t,r,a){if(!o&&!n&&!r.editor.readOnly){var i=at(t.target);e=i.document.activeElement,Ht("onSelect",{event:t}),a()}}}),l=(i=null,{onBeforeInput:function(e,t,n){var r=t.editor,o=t.value;if(e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var a=e.getTargetRanges(),i=ht(a,1)[0];if(!i)return n();Kt("onBeforeInput",{event:e}),e.preventDefault();var s=o.document,c=o.selection,l=Bt(i,r);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(l);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(l);break;case"deleteWordForward":t.deleteWordForwardAtRange(l);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(l);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(l);break;case"insertLineBreak":case"insertParagraph":s.hasVoidParent(c.start.path,r)?t.moveToStartOfNextText():t.splitBlockAtRange(l);break;case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)break;t.insertTextAtRange(l,u,c.marks),c.marks&&o.document!=t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){Kt("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){var r=t.editor;if(r.readOnly)return n();var o=r.value.document,a=Rt(e.target,r);if(!a)return n();Kt("onClick",{event:e});var i=o.getAncestors(a.key);a&&(t.isVoid(a)||i.some(function(e){return t.isVoid(e)}))&&t.focus().moveToEndOfNode(a),n()},onCopy:function(e,t,n){Kt("onCopy",{event:e}),Dt(e,t.editor),n()},onCut:function(e,t,n){Kt("onCut",{event:e});var r=t.editor;Dt(e,r,function(){var e=t.value,n=e.endBlock,o=e.endInline,a=e.selection.isCollapsed,i=n&&t.isVoid(n)&&a,s=o&&t.isVoid(o)&&a;i?r.change(function(e){return e.removeNodeByKey(n.key)}):s?r.change(function(e){return e.removeNodeByKey(o.key)}):r.change(function(e){return e.delete()})}),n()},onDragEnd:function(e,t,n){Kt("onDragEnd",{event:e}),i=null,n()},onDragStart:function(e,t,n){Kt("onDragStart",{event:e}),i=!0;var r=t.editor,o=r.value,a=o.document,s=Rt(e.target,r),c=a.getAncestors(s.key),l=s&&(t.isVoid(s)||c.some(function(e){return t.isVoid(e)})),u=o.blocks.some(function(e){return e.key===s.key});l&&!u&&t.moveToRangeOfNode(s);var d=t.value.fragment;zt(e,"fragment",ce.serializeNode(d)),n()},onDrop:function(e,t,n){var r=t.editor,o=t.value,a=o.document,s=o.selection,c=at(e.target),l=jt(e,r);if(!l)return n();Kt("onDrop",{event:e});var u=Wt(e),d=u.type,f=u.fragment,p=u.text;if(t.focus(),i&&s.end.key==l.end.key&&s.end.offset<l.end.offset&&(l=l.moveForward(s.start.key==s.end.key?0-s.end.offset+s.start.offset:0-s.end.offset)),i&&t.delete(),t.select(l),"text"==d||"html"==d){var v=l.anchor,h=a.hasVoidParent(v.key,r);if(h){for(var m=a.getNode(v.key);h&&(m=a.getNextText(m.key));)h=a.hasVoidParent(m.key,r);m&&t.moveToStartOfNode(m)}p&&p.split("\n").forEach(function(e,n){n>0&&t.splitBlock(),t.insertText(e)})}"fragment"==d&&t.insertFragment(f);var y=st(a.getNode(l.focus.key),c);y&&y.dispatchEvent(new MouseEvent("mouseup",{view:c,bubbles:!0,cancelable:!0})),n()},onInput:function(e,t,n){var r=at(e.target),o=t.editor,a=t.value,i=r.getSelection().anchorNode,s=Et(i,0,o);if(!s)return n();var c=a.document,l=a.selection,u=c.getDescendant(s.key),d=c.getClosestBlock(u.key),f=u.getLeaves(),p=d.getLastText(),v=f.last(),h=0,m=0,y=f.find(function(e){if(h=m,(m+=e.text.length)>s.offset)return!0})||v,g=y.text,b=i.textContent,k=u==p,w=y==v,C=b.charAt(b.length-1);if(k&&w&&"\n"==C&&(b=b.slice(0,-1)),b==g)return n();Kt("onInput",{event:e});var O=b.length-g.length,x=l.moveToEnd().moveForward(O),E=l.moveAnchorTo(s.key,h).moveFocusTo(s.key,m);E=c.resolveRange(E),t.insertTextAtRange(E,b,y.marks).select(x),n()},onKeyDown:function(e,t,n){Kt("onKeyDown",{event:e});var r=t.editor,o=t.value,a=o.document,i=o.selection,s=a.hasVoidParent(i.start.path,r);if(Xe.isSplitBlock(e)&&!Ue)return s?t.moveToStartOfNextText():t.splitBlock();if(Xe.isDeleteBackward(e)&&!Ue)return t.deleteCharBackward();if(Xe.isDeleteForward(e)&&!Ue)return t.deleteCharForward();if(Xe.isDeleteLineBackward(e))return t.deleteLineBackward();if(Xe.isDeleteLineForward(e))return t.deleteLineForward();if(Xe.isDeleteWordBackward(e))return t.deleteWordBackward();if(Xe.isDeleteWordForward(e))return t.deleteWordForward();if(Xe.isRedo(e))return t.redo();if(Xe.isUndo(e))return t.undo();if(Xe.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(Xe.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(Xe.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(Xe.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(Xe.isMoveBackward(e))return e.preventDefault(),i.isCollapsed?t.moveBackward():t.moveToStart();if(Xe.isMoveForward(e))return e.preventDefault(),i.isCollapsed?t.moveForward():t.moveToEnd();if(Xe.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(Xe.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(Xe.isExtendBackward(e)){var c=o.previousText,l=o.startText,u=c&&a.hasVoidParent(c.key,r);if(s||u||""==l.text)return e.preventDefault(),t.moveFocusBackward()}if(Xe.isExtendForward(e)){var d=o.nextText,f=o.startText,p=d&&a.hasVoidParent(d.key,r);if(s||p||""==f.text)return e.preventDefault(),t.moveFocusForward()}n()},onPaste:function(e,t,n){Kt("onPaste",{event:e});var r=t.value,o=Wt(e),a=o.type,i=o.fragment,s=o.text;if("fragment"==a&&t.insertFragment(i),"text"==a||"html"==a){if(!s)return n();var c=r.document,l=r.selection,u=r.startBlock;if(t.isVoid(u))return n();var d=u,f=c.getInsertMarksAtRange(l),p=et.deserialize(s,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(p)}n()},onSelect:function(e,t,n){Kt("onSelect",{event:e});var r=at(e.target),o=t.editor,a=t.value,i=a.document,s=r.getSelection();if(s.rangeCount){var c=Bt(s,o);if(c){var l=c,u=l.anchor,d=l.focus,f=i.getNode(u.key),p=i.getNode(d.key),v=i.getClosestInline(u.key),h=i.getClosestInline(d.key),m=i.getClosestBlock(d.key),y=i.getClosestBlock(u.key);if(y&&!t.isVoid(y)&&0==u.offset&&m&&t.isVoid(m)&&0!=d.offset&&(c=c.setFocus(d.setOffset(0))),v&&!t.isVoid(v)&&u.offset==f.text.length){var g=i.getClosestBlock(u.key).getNextText(u.key);g&&(c=c.moveAnchorTo(g.key,0))}if(h&&!t.isVoid(h)&&d.offset==p.text.length){var b=i.getClosestBlock(d.key).getNextText(d.key);b&&(c=c.moveFocusTo(b.key,0))}var k=i.createSelection(c);k=(k=k.setIsFocused(!0)).set("marks",a.selection.marks),t.select(k),n()}}else t.blur()}});return[c].concat(mt(void 0===s?[]:s),[l])}var $t=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Xt="object"==typeof R&&R&&R.Object===Object&&R,Gt="object"==typeof self&&self&&self.Object===Object&&self,Yt=Xt||Gt||Function("return this")(),Zt=function(){return Yt.Date.now()},Qt=Yt.Symbol,en=Object.prototype,tn=en.hasOwnProperty,nn=en.toString,rn=Qt?Qt.toStringTag:void 0;var on=function(e){var t=tn.call(e,rn),n=e[rn];try{e[rn]=void 0;var r=!0}catch(e){}var o=nn.call(e);return r&&(t?e[rn]=n:delete e[rn]),o},an=Object.prototype.toString;var sn=function(e){return an.call(e)},cn="[object Null]",ln="[object Undefined]",un=Qt?Qt.toStringTag:void 0;var dn=function(e){return null==e?void 0===e?ln:cn:un&&un in Object(e)?on(e):sn(e)};var fn=function(e){return null!=e&&"object"==typeof e},pn="[object Symbol]";var vn=function(e){return"symbol"==typeof e||fn(e)&&dn(e)==pn},hn=NaN,mn=/^\s+|\s+$/g,yn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,bn=/^0o[0-7]+$/i,kn=parseInt;var wn=function(e){if("number"==typeof e)return e;if(vn(e))return hn;if($t(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$t(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mn,"");var n=gn.test(e);return n||bn.test(e)?kn(e.slice(2),n?2:8):yn.test(e)?hn:+e},Cn="Expected a function",On=Math.max,xn=Math.min;var En=function(e,t,n){var r,o,a,i,s,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(Cn);function p(t){var n=r,a=o;return r=o=void 0,l=t,i=e.apply(a,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=a}function h(){var e=Zt();if(v(e))return m(e);s=setTimeout(h,function(e){var n=t-(e-c);return d?xn(n,a-(e-l)):n}(e))}function m(e){return s=void 0,f&&r?p(e):(r=o=void 0,i)}function y(){var e=Zt(),n=v(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(h,t),u?p(e):i}(c);if(d)return s=setTimeout(h,t),p(c)}return void 0===s&&(s=setTimeout(h,t)),i}return t=wn(t)||0,$t(n)&&(u=!!n.leading,a=(d="maxWait"in n)?On(wn(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},y.flush=function(){return void 0===s?i:m(Zt())},y},Sn="Expected a function";var Tn=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(Sn);return $t(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),En(e,t,{leading:r,maxWait:t,trailing:o})},Fn="<<anonymous>>";function Nn(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof a.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function Dn(e){function t(t,n,r,o,a,i){for(var s=arguments.length,c=Array(s>6?s-6:0),l=6;l<s;l++)c[l-6]=arguments[l];return i=i||r,o=o||Fn,null!=n[r]?e.apply(void 0,[n,r,o,a,i].concat(c)):t?new Error("Required "+a+" `"+i+"` was not specified in `"+o+"`."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function Rn(e,t){return Dn(function(n,r,o,a,i){var s=n[r];if(!t(s)){var c=Nn(s);return new Error("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function An(e,t,n){return Dn(function(r,o,a,i,s){for(var c=arguments.length,l=Array(c>5?c-5:0),u=5;u<c;u++)l[u-5]=arguments[u];var d=r[o];if(!n(d)){var f=i,p=Nn(d);return new Error("Invalid "+f+" `"+s+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+s+"`, expected a function.");for(var v=d.toArray(),h=0,m=v.length;h<m;h++){var y=e.apply(void 0,[v,h,a,i,s+"["+h+"]"].concat(l));if(y instanceof Error)return y}})}function Bn(e,t,n,r){return Dn(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return An(e,n,r).apply(void 0,a)||t&&(s=t,Dn(function(e,t,n,r,o){for(var a=arguments.length,i=Array(a>5?a-5:0),c=5;c<a;c++)i[c-5]=arguments[c];var l=e[t];if("function"!=typeof s)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+o+"`, expected a function.");for(var u=l.keySeq().toArray(),d=0,f=u.length;d<f;d++){var p=s.apply(void 0,[u,d,n,r,o+" -> key("+u[d]+")"].concat(i));if(p instanceof Error)return p}})).apply(void 0,a);var s})}function jn(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?a.Iterable.isIterable:arguments[2];return Dn(function(r,o,a,i,s){for(var c=arguments.length,l=Array(c>5?c-5:0),u=5;u<c;u++)l[u-5]=arguments[u];var d=r[o];if(!n(d)){var f=Nn(d);return new Error("Invalid "+i+" `"+s+"` of type `"+f+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var p=d.toObject();for(var v in e){var h=e[v];if(h){var m=h.apply(void 0,[p,v,a,i,s+"."+v].concat(l));if(m)return m}}})}function In(e){return jn(e)}var Ln={listOf:function(e){return An(e,"List",a.List.isList)},mapOf:function(e,t){return Bn(e,t,"Map",a.Map.isMap)},orderedMapOf:function(e,t){return Bn(e,t,"OrderedMap",a.OrderedMap.isOrderedMap)},setOf:function(e){return An(e,"Set",a.Set.isSet)},orderedSetOf:function(e){return An(e,"OrderedSet",a.OrderedSet.isOrderedSet)},stackOf:function(e){return An(e,"Stack",a.Stack.isStack)},iterableOf:function(e){return An(e,"Iterable",a.Iterable.isIterable)},recordOf:function(e){return Dn(function(t,n,r,o,i){for(var s=arguments.length,c=Array(s>5?s-5:0),l=5;l<s;l++)c[l-5]=arguments[l];var u=t[n];if(!(u instanceof a.Record)){var d=Nn(u),f=o;return new Error("Invalid "+f+" `"+i+"` of type `"+d+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var p in e){var v=e[p];if(v){var h=u.toObject(),m=v.apply(void 0,[h,p,r,o,i+"."+p].concat(c));if(m)return m}}})},shape:In,contains:In,mapContains:function(e){return jn(e,"Map",a.Map.isMap)},list:Rn("List",a.List.isList),map:Rn("Map",a.Map.isMap),orderedMap:Rn("OrderedMap",a.OrderedMap.isOrderedMap),set:Rn("Set",a.Set.isSet),orderedSet:Rn("OrderedSet",a.OrderedSet.isOrderedSet),stack:Rn("Stack",a.Stack.isStack),seq:Rn("Seq",a.Seq.isSeq),record:Rn("Record",function(e){return e instanceof a.Record}),iterable:Rn("Iterable",a.Iterable.isIterable)},Mn=W("slate:leaves"),Pn=function(e){function t(){var e,n,r;lt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=vt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),qn.call(r),vt(r,n)}return pt(t,e),ut(t,[{key:"shouldComponentUpdate",value:function(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.text!=this.props.text||e.parent!=this.props.parent}},{key:"render",value:function(){this.debug("render",this);var e=this.props,t=e.node,n=e.index,r=gt.stringify({key:t.key,index:n});return o.createElement("span",{"data-offset-key":r},this.renderMarks())}},{key:"renderMarks",value:function(){var e=this.props,t=e.marks,n=e.node,r=e.offset,o=e.text,a=e.editor,i=this.renderText(),s={"data-slate-leaf":!0};return t.reduce(function(e,i){var c={editor:a,mark:i,marks:t,node:n,offset:r,text:o,children:e,attributes:s};return a.run("renderMark",c)||e},i)}},{key:"renderText",value:function(){var e=this.props,t=e.block,n=e.node,r=e.editor,a=e.parent,i=e.text,s=e.index,c=e.leaves;if(r.query("isVoid",a))return o.createElement("span",{"data-slate-zero-width":"z"},"\ufeff");if(""===i&&"block"===a.object&&""===a.text&&a.nodes.last()===n)return o.createElement("span",{"data-slate-zero-width":"n"},"\ufeff");if(""===i)return o.createElement("span",{"data-slate-zero-width":"z"},"\ufeff");var l=t.getLastText(),u=i.charAt(i.length-1),d=n===l,f=s===c.size-1;return d&&f&&"\n"===u?i+"\n":i}}]),t}(o.Component);Pn.propTypes={block:U.block.isRequired,editor:Z.object.isRequired,index:Z.number.isRequired,leaves:U.leaves.isRequired,marks:U.marks.isRequired,node:U.node.isRequired,offset:Z.number.isRequired,parent:U.node.isRequired,text:Z.string.isRequired};var qn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Mn.apply(void 0,[t,e.props.node.key+"-"+e.props.index].concat(r))}},_n=W("slate:node"),Wn=function(e){function n(){var e,t,r;lt(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=vt(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),Vn.call(r),vt(r,t)}return pt(n,e),ut(n,[{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,r=n.decorations,a=n.editor,i=n.node,s=n.style,c=a.value.document,l=i.key,u=r.filter(function(e){var n=e.start,r=e.end;if(n.key===l||r.key===l)return!0;if(n.key===r.key)return!1;var o=c.assertPath(l);return-1!==t.PathUtils.compare(o,n.path)&&1!==t.PathUtils.compare(o,r.path)}),d=0===u.size?i.getLeaves():i.getLeaves(u),f=0,p=d.map(function(t,n){var r=e.renderLeaf(d,t,n,f);return f+=t.text.length,r});return o.createElement("span",{"data-key":l,style:s},p)}}]),n}(o.Component);Wn.propTypes={block:U.block,decorations:Ln.list.isRequired,editor:Z.object.isRequired,node:U.node.isRequired,parent:U.node.isRequired,style:Z.object},Wn.defaultProps={style:null};var Vn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node.key;_n.apply(void 0,[t,a+" (text)"].concat(r))},this.shouldComponentUpdate=function(t){var n=t,r=e.props;if(n.node!=r.node)return!0;if("block"==n.parent.object){var o=r.parent.nodes.last(),a=n.parent.nodes.last();if(r.node==o&&n.node!=a)return!0}return!n.decorations.equals(r.decorations)},this.renderLeaf=function(t,n,r,a){var i=e.props,s=i.block,c=i.node,l=i.parent,u=i.editor,d=n.text,f=n.marks;return o.createElement(Pn,{key:c.key+"-"+r,block:s,editor:u,index:r,marks:f,node:c,offset:a,parent:l,leaves:t,text:d})}},Un=W("slate:void"),zn=function(e){function t(){var e,n,r;lt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=vt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Kn.call(r),vt(r,n)}return pt(t,e),ut(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.node,r=e.readOnly,a="block"==n.object?"div":"span",i=o.createElement(a,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),s=o.createElement(a,{contentEditable:!!r&&null},t);return this.debug("render",{props:e}),o.createElement(a,{"data-slate-void":!0,"data-key":n.key,contentEditable:!(!r&&"block"!=n.object)&&null},r?null:i,s)}}]),t}(o.Component);zn.propTypes={block:U.block,children:Z.any.isRequired,editor:Z.object.isRequired,node:U.node.isRequired,parent:U.node.isRequired,readOnly:Z.bool.isRequired};var Kn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";Un.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var t=e.props,n=t.block,r=t.decorations,a=t.node,i=t.readOnly,s=t.editor,c=a.getFirstText();return o.createElement(Wn,{block:"block"==a.object?a:n,decorations:r,editor:s,key:c.key,node:c,parent:a,readOnly:i})}};function Hn(e,t){var r=n.Set().asMutable(),o=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map(function(e,t){return{child:e,index:t}});var n=dt({},e.key,0),r=1;e.forEachDescendant(function(e){n[e.key]=r,r+=1});var o=e.nodes.toArray(),a=o.map(function(e,t){return{child:e,index:t,order:n[e.key]}});return t.forEach(function(e){var t=n[e.start.key],i=void 0===t?0:function(e,t,n){var r=e.findIndex(function(e){return n<t[e.key]});if(r<=0)return 0;var o=e[r-1];return t[o.key]}(o,n,t);a.push({isRangeStart:!0,order:i-.5,decoration:e});var s=(n[e.end.key]||r)+.5;a.push({isRangeEnd:!0,order:s,decoration:e})}),a.sort(function(e,t){return e.order>t.order?1:-1})}(e,t).forEach(function(e){e.isRangeStart?r.add(e.decoration):e.isRangeEnd?r.remove(e.decoration):o.push(r.toList())}),o}var Jn=W("slate:node"),$n=function(e){function t(){var e,n,r;lt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=vt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Xn.call(r),vt(r,n)}return pt(t,e),ut(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(n)return!0;te(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!=o.readOnly||(r.node!=o.node||(!(!r.isSelected&&!o.isSelected)||(!(!r.isFocused&&!o.isFocused)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e=this;this.debug("render",this);var t=this.props,n=t.editor,r=t.isSelected,a=t.isFocused,i=t.node,s=t.decorations,c=t.parent,l=t.readOnly,u=n.value.selection,d=i.getSelectionIndexes(u,r),f=Hn(i,s.concat(i.getDecorations(n))),p=[];i.nodes.forEach(function(t,n){var r=!!d&&d.start<=n&&n<d.end;p.push(e.renderNode(t,r,f[n]))});var v={"data-key":i.key};"block"==i.object&&"block"!=i.nodes.first().object&&("rtl"==i.getTextDirection()&&(v.dir="rtl"));var h={key:i.key,editor:n,isFocused:a,isSelected:r,node:i,parent:c,readOnly:l},m=n.run("renderPlaceholder",h);m&&(m=o.cloneElement(m,{key:i.key+"-placeholder"}),p=[m].concat(mt(p)));var y=n.run("renderNode",ft({},h,{attributes:v,children:p}));return n.query("isVoid",i)?o.createElement(zn,this.props,y):y}}]),t}(o.Component);$n.propTypes={block:U.block,decorations:Ln.list.isRequired,editor:Z.object.isRequired,isFocused:Z.bool.isRequired,isSelected:Z.bool.isRequired,node:U.node.isRequired,parent:U.node.isRequired,readOnly:Z.bool.isRequired};var Xn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;Jn.apply(void 0,[t,i+" ("+s+")"].concat(r))},this.renderNode=function(t,n,r){var a=e.props,i=a.block,s=a.editor,c=a.node,l=a.readOnly,u=a.isFocused,d="text"==t.object?Wn:$n;return o.createElement(d,{block:"block"==c.object?c:i,decorations:r,editor:s,isSelected:n,isFocused:u&&n,key:t.key,node:t,parent:c,readOnly:l})}};function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.anchor,r=e.focus,o=e.isBackward,a=e.isCollapsed,i=At(n,t),s=a?i:At(r,t);if(!i||!s)return null;var c=t.document.createRange(),l=o?s:i,u=o?i:s;return c.setStart(l.node,l.offset),c.setEnd(u.node,u.offset),c}var Yn=function(e){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,a=t.compareDocumentPosition(r);return!(4===a||0===a&&n<o)},Zn=["auto","overlay","scroll"],Qn=Ue&&!!window.navigator.userAgent.match(/os 11_/i);function er(e){if(!Qn&&e.anchorNode){var t=at(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(Zn.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n==t.document.body||n==t.document.documentElement,o=Yn(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();_e&&a.collapsed&&0==i.top&&0==i.height&&(0==a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0==(i=a.getBoundingClientRect()).top&&0==i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,c=void 0,l=void 0,u=void 0,d=0,f=0,p=0,v=0,h=0,m=0,y=0,g=0;if(r){s=t.innerWidth,c=t.innerHeight,l=t.pageYOffset,u=t.pageXOffset}else{var b=n.offsetWidth,k=n.offsetHeight,w=n.scrollTop,C=n.scrollLeft,O=t.getComputedStyle(n),x=O.borderTopWidth,E=O.borderBottomWidth,S=O.borderLeftWidth,T=O.borderRightWidth,F=O.paddingTop,N=O.paddingBottom,D=O.paddingLeft,R=O.paddingRight,A=n.getBoundingClientRect();s=b,c=k,d=A.top+parseInt(x,10),f=A.left+parseInt(S,10),p=parseInt(x,10)+parseInt(E,10),v=parseInt(S,10)+parseInt(T,10),h=parseInt(F,10),m=parseInt(N,10),y=parseInt(D,10),g=parseInt(R,10),l=w,u=C}var B=i.top+l-d,j=i.left+u-f,I=u,L=l;j<u?I=j-y:j+i.width+v>u+s&&(I=j+v+g-s),B<l?L=B-h:B+i.height+p>l+c&&(L=B+p+m+i.height-c),r?t.scrollTo(I,L):(n.scrollTop=L,n.scrollLeft=I)}}var tr=/Permission denied to access property "nodeType"/,nr=W("slate:content"),rr=function(e){function t(){var e,n,r;lt(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=r=vt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.tmp={isUpdatingSelection:!1},r.handlers=ne.reduce(function(e,t){return e[t]=function(e){return r.onEvent(t,e)},e},{}),r.updateSelection=function(){var e=r.props.editor.value.selection,t=e.isBackward,n=at(r.element),o=n.getSelection();if(o){var a=o.rangeCount,i=o.anchorNode;if(a||!e.isBlurred){if(e.isBlurred){if(!r.isInEditor(i))return;return ct(o),r.element.blur(),void nr("updateSelection",{selection:e,native:o})}if(!e.isUnset){var s=!!a&&o.getRangeAt(0),c=Gn(e,n);if(c){var l=c.startContainer,u=c.startOffset,d=c.endContainer,f=c.endOffset;s&&(l==s.startContainer&&u==s.startOffset&&d==s.endContainer&&f==s.endOffset||l==s.endContainer&&u==s.endOffset&&d==s.startContainer&&f==s.startOffset)||(r.tmp.isUpdatingSelection=!0,ct(o),o.setBaseAndExtent?t?o.setBaseAndExtent(c.endContainer,c.endOffset,c.startContainer,c.startOffset):o.setBaseAndExtent(c.startContainer,c.startOffset,c.endContainer,c.endOffset):o.addRange(c),er(o),setTimeout(function(){qe&&r.element&&r.element.focus(),r.tmp.isUpdatingSelection=!1}),nr("updateSelection",{selection:e,native:o}))}else te(!1,"Unable to find a native DOM range from the current selection.")}}}},r.ref=function(e){r.element=e},r.isInEditor=function(e){var t=r.element,n=void 0;try{if(8===e.nodeType)return!1;n=3===e.nodeType?e.parentNode:e}catch(e){if(qe&&tr.test(e.message))return!1;throw e}return(n.isContentEditable||n.closest("[data-slate-void]"))&&(n===t||n.closest("[data-slate-editor]")===t)},r.onNativeSelectionChange=Tn(function(e){r.props.readOnly||at(e.target).document.activeElement===r.element&&r.props.onEvent("onSelect",e)},100),r.renderNode=function(e,t,n){var a=r.props,i=a.editor,s=a.readOnly,c=i.value,l=c.document,u=c.selection.isFocused;return o.createElement($n,{block:null,editor:i,decorations:n,isSelected:t,isFocused:u&&t,key:e.key,node:e,parent:l,readOnly:s})},vt(r,n)}return pt(t,e),ut(t,[{key:"componentDidMount",value:function(){at(this.element).document.addEventListener("selectionchange",this.onNativeSelectionChange),Ke&&this.element.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=at(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),Ke&&this.element.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){this.updateSelection()}},{key:"onEvent",value:function(e,t){if(nr("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!=e&&"onBlur"!=e&&"onFocus"!=e){if("onSelect"==e){var n=this.props.editor,r=n.value.selection,o=Bt(at(t.target).getSelection(),n);if(o&&o.equals(r.toRange()))return void this.updateSelection()}if("onDragEnd"==e||"onDragEnter"==e||"onDragExit"==e||"onDragLeave"==e||"onDragOver"==e||"onDragStart"==e||"onDrop"==e)if(t.target.closest("[data-slate-editor]")!==this.element)return;("onBeforeInput"!=e&&"onBlur"!=e&&"onCompositionEnd"!=e&&"onCompositionStart"!=e&&"onCopy"!=e&&"onCut"!=e&&"onFocus"!=e&&"onInput"!=e&&"onKeyDown"!=e&&"onKeyUp"!=e&&"onPaste"!=e&&"onSelect"!=e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e=this,t=this.props,n=this.handlers,r=t.className,a=t.readOnly,i=t.editor,s=t.tabIndex,c=t.role,l=t.tagName,u=t.spellCheck,d=i.value,f=l,p=d.document,v=d.selection,h=d.decorations,m=p.getSelectionIndexes(v),y=Hn(p,p.getDecorations(i).concat(h)),g=p.nodes.toArray().map(function(t,n){var r=!!m&&m.start<=n&&n<m.end;return e.renderNode(t,r,y[n])}),b=ft({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style);return nr("render",{props:t}),o.createElement(f,ft({},n,{"data-slate-editor":!0,ref:this.ref,"data-key":p.key,contentEditable:!a||null,suppressContentEditableWarning:!0,className:r,autoCorrect:t.autoCorrect?"on":"off",spellCheck:u,style:b,role:a?null:c||"textbox",tabIndex:s,"data-gramm":!1}),g)}}]),t}(o.Component);rr.propTypes={autoCorrect:Z.bool.isRequired,className:Z.string,editor:Z.object.isRequired,readOnly:Z.bool.isRequired,role:Z.string,spellCheck:Z.bool.isRequired,style:Z.object,tabIndex:Z.number,tagName:Z.string},rr.defaultProps={style:{},tagName:"div"};var or=[].concat(mt(ne),["commands","decorateNode","queries","renderEditor","renderMark","renderNode","renderPlaceholder","schema"]);function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.plugins,r=void 0===n?[]:n;return[Jt({plugins:[or.reduce(function(t,n){return n in e&&(t[n]=e[n]),t},{})].concat(mt(r))}),{renderEditor:function(e,t){var n=e.editor;return o.createElement(rr,{onEvent:n.event,autoCorrect:e.autoCorrect,className:e.className,editor:n,readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName})},renderNode:function(e,t){var n=e.attributes,r=e.children,a=e.node.object;if("block"!=a&&"inline"!=a)return null;var i="block"==a?"div":"span";return o.createElement(i,ft({},n,{style:{position:"relative"}}),r)},renderPlaceholder:function(e,n){var r=e.editor,a=e.node;return r.props.placeholder?r.state.isComposing?null:"block"!=a.object?null:t.Text.isTextList(a.nodes)?""!=a.text?null:r.value.document.getBlocks().size>1?null:o.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},r.props.placeholder):null:null}}]}var ir=W("slate:editor"),sr=function(e){function t(){var e,n,r;lt(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=vt(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),cr.call(r),vt(r,n)}return pt(t,e),ut(t,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.change(function(e){return e.focus()}),this.tmp.change&&(this.props.onChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.props.onChange(this.tmp.change),this.tmp.change=null)}},{key:"render",value:function(){ir("render",this);var e=ft({},this.props,{editor:this}),t=e.commands,n=e.plugins,r=e.queries,o=e.schema;this.resolveController(n,o,t,r);var a=e.options,i=e.readOnly,s=e.value;return this.controller.setReadOnly(i),this.controller.setValue(s,a),this.controller.run("renderEditor",e)}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"schema",get:function(){Q(!1,"As of Slate 0.42.0, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Q(!1,"As of Slate 0.42.0, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),t}(o.Component);sr.propTypes=ft({autoCorrect:Z.bool,autoFocus:Z.bool,className:Z.string,onChange:Z.func,options:Z.object,placeholder:Z.any,plugins:Z.array,readOnly:Z.bool,role:Z.string,schema:Z.object,spellCheck:Z.bool,style:Z.object,tabIndex:Z.number,value:U.value.isRequired},ne.reduce(function(e,t){return e[t]=Z.func,e},{})),sr.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},plugins:[],readOnly:!1,schema:{},spellCheck:!0};var cr=function(){var e=this;this.state={},this.tmp={mounted:!1,change:null,resolves:0,updates:0},this.onControllerChange=function(t){e.tmp.mounted?e.props.onChange(t):e.tmp.change=t},this.resolveController=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee,n=void 0,r=[],o=void 0,a=!1,i=function(e,n){return t(e,r[n])};return function(){for(var t=arguments.length,s=Array(t),c=0;c<t;c++)s[c]=arguments[c];return a&&n===this&&s.length===r.length&&s.every(i)?o:(a=!0,n=this,r=s,o=e.apply(this,s))}}(function(){te(e.tmp.resolves<5||e.tmp.resolves!==e.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands` or `queries` on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),e.tmp.resolves++;var n=ar(e.props),r={onChange:e.onControllerChange,plugins:[n]};e.controller=new t.Editor(r,{editor:e,normalize:!1})}),this.change=function(){var t;return(t=e.controller).change.apply(t,arguments)},this.command=function(){var t;return(t=e.controller).command.apply(t,arguments)},this.event=function(){var t;return(t=e.controller).event.apply(t,arguments)},this.onChange=function(){var t;return(t=e.controller).onChange.apply(t,arguments)},this.query=function(){var t;return(t=e.controller).query.apply(t,arguments)},this.run=function(){var t;return(t=e.controller).run.apply(t,arguments)},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})}},lr={Editor:sr,cloneFragment:Dt,findDOMNode:st,findDOMRange:Gn,findNode:Rt,findRange:Bt,getEventRange:jt,getEventTransfer:Wt,setEventTransfer:zt,ReactPlugin:ar};e.Editor=sr,e.cloneFragment=Dt,e.findDOMNode=st,e.findDOMRange=Gn,e.findNode=Rt,e.findRange=Bt,e.getEventRange=jt,e.getEventTransfer=Wt,e.setEventTransfer=zt,e.ReactPlugin=ar,e.default=lr,Object.defineProperty(e,"__esModule",{value:!0})});
